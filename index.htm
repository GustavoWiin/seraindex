<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Simulador de Proposta • White Rosa</title>
  <meta name="description" content="Simule, compare e visualize um cenário ilustrativo de acordo em segundos.">

  <style>
    :root{
      /* paleta white + rosa estilo serasa */
      --surface: #ffffff;
      --page: #ffffff;
      --ink: #1f2a37;
      --muted: #6b7280;

      --pink: #e91e63;
      --pink-2:#ff4f93;
      --pink-soft:#fde7f0;
      --focus: rgba(233,30,99,.16);

      --border:#eceff3;
      --shadow: 0 10px 24px rgba(9, 16, 29, .06);
      --r:14px;
    }

    *{box-sizing: border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:var(--page);
      color:var(--ink);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      -webkit-font-smoothing: antialiased;
    }

    .wrap{max-width:1120px;margin:0 auto;padding:20px}
    header{display:flex;align-items:center;gap:12px;padding:8px 0 18px}
    .logo{
      width:36px;height:36px;border-radius:10px;flex:0 0 36px;
      background: radial-gradient(60% 60% at 30% 30%, #fff 0%, #ffd3e2 55%, #ffb1cd 100%);
      border:1px solid var(--border);
      box-shadow: inset 0 0 10px rgba(255,255,255,.6);
    }
    .brand{font-weight:800;letter-spacing:.2px}

    .grid{display:grid;grid-template-columns:1.25fr .75fr;gap:20px}
    @media (max-width:980px){ .grid{grid-template-columns:1fr} }

    .card{
      background:var(--surface);
      border:1px solid var(--border);
      border-radius:var(--r);
      box-shadow:var(--shadow);
      padding:20px;
    }

    .tag{
      display:inline-flex;align-items:center;gap:8px;
      background:var(--pink-soft); color:var(--pink);
      font-weight:700; font-size:12px; padding:6px 10px; border-radius:999px;
    }
    h1{margin:10px 0 6px; font-size: clamp(22px, 3.4vw, 34px)}
    .lead{margin:0 0 10px; color:var(--muted)}

    form{display:grid;grid-template-columns:1fr 1fr;gap:14px;margin-top:10px}
    @media (max-width:720px){form{grid-template-columns:1fr}}
    label{display:block;font-size:13px;font-weight:700;margin:0 0 6px}
    .ctrl{display:flex;flex-direction:column}
    input[type="text"], input[type="number"], select{
      width:100%; padding:12px 12px; border-radius:10px;
      border:1px solid var(--border); background:#fff; font-size:15px; outline:0;
      transition:border-color .15s, box-shadow .15s;
    }
    input:focus, select:focus{border-color:var(--pink); box-shadow:0 0 0 4px var(--focus)}
    .row{display:flex;gap:12px}
    .row > .ctrl{flex:1}

    .range{
      padding:12px; border-radius:10px; border:1px solid var(--border);
      background: linear-gradient(#fff, #fafbfc);
    }
    .range-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
    input[type="range"]{width:100%}

    .actions{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .btn{
      appearance:none; border:0; cursor:pointer;
      padding:13px 18px; border-radius:10px; font-weight:800;
      background: linear-gradient(180deg, var(--pink) 0%, var(--pink-2) 100%);
      color:#fff; box-shadow:0 10px 18px rgba(233,30,99,.18);
      transition: filter .15s, transform .04s;
    }
    .btn:hover{ filter:brightness(1.02) }
    .btn:active{ transform: translateY(1px) }
    .btn--ghost{
      background:#fff; color:var(--pink); border:1px solid var(--pink); box-shadow:none;
    }
    .hint{font-size:12px;color:var(--muted)}

    .result{display:none;margin-top:10px}
    .result.show{display:block}
    .kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
    @media (max-width:720px){ .kpis{grid-template-columns:1fr} }
    .kpi{padding:12px;border-radius:10px;border:1px solid var(--border);background:#fff}
    .kpi .k{font-size:12px;color:var(--muted)}
    .kpi .v{margin-top:4px;font-weight:900;font-size:20px}

    .side h3{margin:0 0 8px}
    .side p, .side li{color:#4b5563}
    .callout{background:#fff;border:1px dashed var(--border);padding:12px;border-radius:10px;color:#6b7280}

    /* Loader leve (white-safe) */
    .scrim{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.25);z-index:40}
    .scrim.show{display:flex}
    .dots{display:inline-grid;grid-auto-flow:column;gap:6px}
    .dots span{width:8px;height:8px;border-radius:999px;background:var(--pink);opacity:.5;animation:b .8s infinite}
    .dots span:nth-child(2){animation-delay:.15s}
    .dots span:nth-child(3){animation-delay:.3s}
    @keyframes b{50%{opacity:1}}
    footer{margin-top:26px;font-size:13px;color:#9aa3af}
    footer a{color:#64748b;text-decoration:none}
    footer .fgrid{display:grid;grid-template-columns:2fr 1fr;gap:10px}
    @media (max-width:820px){footer .fgrid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <!-- loader -->
  <div class="scrim" id="scrim" aria-hidden="true" aria-label="Processando">
    <div class="dots" role="status" aria-live="polite"><span></span><span></span><span></span></div>
  </div>

  <div class="wrap">
    <header>
      <div class="logo" aria-hidden="true"></div>
      <div class="brand">Proposta Rosa</div>
    </header>

    <section class="grid">
      <!-- COLUNA PRINCIPAL -->
      <div class="card">
        <span class="tag">Simule em segundos</span>
        <h1>Veja uma <strong>estimativa de acordo</strong> em poucos passos</h1>
        <p class="lead">Informe valores aproximados, escolha as parcelas e visualize um cenário ilustrativo. Sem compromisso.</p>

        <form id="sim">
          <div class="ctrl">
            <label for="v">Valor aproximado do débito (R$)</label>
            <input id="v" name="v" type="text" inputmode="numeric" placeholder="Ex.: 2.500,00" autocomplete="off" required>
          </div>

          <div class="ctrl">
            <label for="s">Situação atual</label>
            <select id="s" name="s" required>
              <option value="emdia">Em dia / ajuste pontual</option>
              <option value="30-90">Atraso entre 30 e 90 dias</option>
              <option value="90+">Atraso superior a 90 dias</option>
            </select>
          </div>

          <div class="row">
            <div class="ctrl">
              <label for="r">Renda mensal estimada (R$)</label>
              <input id="r" name="r" type="text" inputmode="numeric" placeholder="Ex.: 3.200,00" autocomplete="off">
            </div>
            <div class="ctrl">
              <label for="c">Canal preferido</label>
              <select id="c" name="c">
                <option>WhatsApp</option>
                <option>E-mail</option>
                <option>Telefone</option>
              </select>
            </div>
          </div>

          <div class="range">
            <div class="range-head">
              <span style="font-weight:800">Quantidade de parcelas</span>
              <strong id="pLabel">6x</strong>
            </div>
            <input id="p" type="range" min="1" max="24" step="1" value="6" aria-label="Quantidade de parcelas">
            <div class="hint">À vista tende a melhores abatimentos. Parcelado prioriza previsibilidade.</div>
          </div>

          <div class="actions" style="margin-top:10px">
            <button class="btn" type="submit" id="go">Calcular</button>
            <button class="btn btn--ghost" type="button" id="reset">Limpar</button>
            <span class="hint">Resultado meramente ilustrativo. Condições reais dependem do parceiro credor.</span>
          </div>

          <div class="result" id="out">
            <div class="kpis">
              <div class="kpi">
                <div class="k">Desconto estimado</div>
                <div class="v" id="oDesc">—</div>
              </div>
              <div class="kpi">
                <div class="k">Valor do acordo</div>
                <div class="v" id="oAcordo">—</div>
              </div>
              <div class="kpi">
                <div class="k">Parcela aproximada</div>
                <div class="v" id="oParc">—</div>
              </div>
            </div>
          </div>
        </form>
      </div>

      <!-- COLUNA LATERAL -->
      <aside class="card side">
        <h3>Como funciona</h3>
        <ol style="margin:6px 0 10px 18px;line-height:1.6">
          <li>Preencha os valores aproximados para simular.</li>
          <li>Veja o cenário sugerido (à vista ou parcelado).</li>
          <li>Se fizer sentido, prossiga e confirme seus dados com segurança.</li>
        </ol>
        <h4 style="margin:8px 0 6px">Dicas úteis</h4>
        <ul style="margin:0 0 10px 18px;line-height:1.6">
          <li>À vista costuma trazer os maiores abatimentos.</li>
          <li>Mais parcelas = prazo maior e custo efetivo maior.</li>
          <li>Dados corretos aceleram a análise.</li>
        </ul>
        <div class="callout"><strong>Atenção:</strong> Esta é uma simulação. As condições finais podem variar conforme a política do parceiro credor.</div>
      </aside>
    </section>

    <footer>
      <div class="fgrid">
        <div>© <span id="y"></span> Proposta Rosa — Exemplo ilustrativo, sem compromisso.</div>
        <div style="text-align:right">
          <a href="#" rel="nofollow">Política de Privacidade</a> ·
          <a href="#" rel="nofollow">Termos de Uso</a>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // ===== Helpers de moeda (reescritos, mesma funcionalidade) =====
    const brlFormat = new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' });
    const digitsOnly = s => (s || '').replace(/\D+/g, '');
    const toNumberBRL = s => { const d = digitsOnly(s); return d ? Number(d) / 100 : 0; };
    function maskMoney(el){
      const v = toNumberBRL(el.value);
      el.value = v ? brlFormat.format(v) : '';
    }

    // ===== DOM =====
    document.getElementById('y').textContent = new Date().getFullYear();

    const $v = document.getElementById('v');
    const $r = document.getElementById('r');
    [$v, $r].forEach(el=>{
      el.addEventListener('input', ()=>maskMoney(el));
      el.addEventListener('blur',  ()=>maskMoney(el));
    });

    const $p = document.getElementById('p');
    const $pLabel = document.getElementById('pLabel');
    $p.addEventListener('input', ()=>{ $pLabel.textContent = $p.value + 'x'; });

    const $form = document.getElementById('sim');
    const $out = document.getElementById('out');
    const $oDesc = document.getElementById('oDesc');
    const $oAcordo = document.getElementById('oAcordo');
    const $oParc = document.getElementById('oParc');

    const $scrim = document.getElementById('scrim');

    document.getElementById('reset').addEventListener('click', ()=>{
      $form.reset();
      $p.value = 6;
      $p.dispatchEvent(new Event('input'));
      [$v,$r].forEach(el=>el.value='');
      $out.classList.remove('show');
    });

    // ===== Núcleo de cálculo (reescrito, mesma matemática) =====
    // Base por situação
    const BASE = { 'emdia': 0.10, '30-90': 0.22, '90+': 0.30 };

    function calcularCenario(valor, situacao, nParcelas){
      // base por situação
      const base = BASE[situacao] ?? 0.10;

      // ajuste por forma de pagamento
      let delta = 0;
      if (nParcelas === 1){
        delta += 0.10;    // à vista +10 p.p.
      } else {
        const extra = Math.max(0, nParcelas - 3);
        delta -= Math.min(0.12, extra * 0.006); // ~0,6 p.p. por parcela acima de 3 (até -12 p.p.)
      }

      // limites “white”
      const desconto = Math.min(0.55, Math.max(0.05, base + delta));
      const acordo = valor * (1 - desconto);
      const parcela = nParcelas > 1 ? (acordo / nParcelas) : acordo;

      return { desconto, acordo, parcela };
    }

    $form.addEventListener('submit', (ev)=>{
      ev.preventDefault();

      const valor = toNumberBRL($v.value);
      if (!valor || valor <= 0){
        alert('Informe um valor aproximado válido para simular.');
        $v.focus();
        return;
      }
      const situacao = document.getElementById('s').value;
      const n = Number($p.value);

      // UX: breve scrim
      $scrim.classList.add('show');
      setTimeout(()=>{
        const { desconto, acordo, parcela } = calcularCenario(valor, situacao, n);

        $oDesc.textContent = (desconto * 100).toFixed(1).replace('.', ',') + '%';
        $oAcordo.textContent = brlFormat.format(acordo);
        $oParc.textContent = brlFormat.format(parcela);

        $out.classList.add('show');
        $scrim.classList.remove('show');
      }, 500);
    });
  </script>
</body>
</html>
